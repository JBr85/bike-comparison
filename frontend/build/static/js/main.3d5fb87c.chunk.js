(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(22)},17:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var l=a(1),n=a.n(l),r=a(9),c=a.n(r),o=(a(17),a(24));const m={padding:"10px",borderBottom:"2px solid black",fontWeight:"bold",textAlign:"center",backgroundColor:"#f4f4f4"},s={padding:"10px",borderBottom:"1px solid #ddd",textAlign:"center"};var i=e=>{let{frame1:t,stem1:a,handlebar1:r,stackHeight1:c,frame2:o,stem2:i,handlebar2:u,stackHeight2:h,stems:d=[]}=e;const[g,p]=Object(l.useState)(null),E=t&&a&&r&&o&&u,b=e=>e*Math.PI/180,f=Object(l.useCallback)((e,t,a,l)=>{if(!e||!t||!a)return{effectiveReach:0,totalDrop:0,stemEnd:[0,0],barEnd:[0,0]};const n=90-e.head_angle,r=b(n+t.angle),c=t.length,o=a.reach,m=a.drop,s=parseFloat(l||0),i=c*Math.cos(r),u=Math.round(e.reach+i+o),h=c*Math.sin(r),d=Math.round(e.stack+s+h),g=a.reach*Math.tan(b(n)),p=Math.round(d-m-g),E=[c*Math.cos(r),s+c*Math.sin(r)];return{effectiveReach:u,totalDrop:p,stemEnd:E,barEnd:[E[0]+o,E[1]-m]}},[]),k=f(t,a,r,c),v=f(o,i,u,h),y=Object(l.useCallback)(()=>{if(!o||!u||0===d.length)return null;let e=null,t=Number.MAX_VALUE;return d.forEach(a=>{[-a.angle,a.angle].forEach(l=>{const n={...a,angle:l},r=f(o,n,u,h),c=Math.abs(r.effectiveReach-k.effectiveReach),m=Math.abs(r.totalDrop-k.totalDrop),s=c+m;s<t&&(t=s,e={...n,reachDiff:c,dropDiff:m,totalDiff:s})})}),e},[o,u,d,h,f,k.effectiveReach,k.totalDrop]);return Object(l.useEffect)(()=>{if(E){const e=y();console.log("Recommended Stem:",e),p(e)}},[y,E]),n.a.createElement("div",{style:{textAlign:"center",marginTop:"20px"}},n.a.createElement("h3",null,n.a.createElement("strong",null,"Bike Geometry Comparison")),n.a.createElement("table",{style:{width:"60%",margin:"0 auto",borderCollapse:"collapse"}},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{style:m}),n.a.createElement("th",{style:m},"Bike 1"),n.a.createElement("th",{style:m},"Bike 2"),n.a.createElement("th",{style:m},"Difference"))),n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",{style:s},n.a.createElement("strong",null,"Reach")),n.a.createElement("td",{style:s},k.effectiveReach," mm"),n.a.createElement("td",{style:s},v.effectiveReach," mm"),n.a.createElement("td",{style:s},n.a.createElement("strong",null,v.effectiveReach-k.effectiveReach," mm"))),n.a.createElement("tr",null,n.a.createElement("td",{style:s},n.a.createElement("strong",null,"Total Drop")),n.a.createElement("td",{style:s},k.totalDrop," mm"),n.a.createElement("td",{style:s},v.totalDrop," mm"),n.a.createElement("td",{style:s},n.a.createElement("strong",null,v.totalDrop-k.totalDrop," mm"))))))};var u=e=>{let{bike1:t,bike2:a}=e;const[r,c]=Object(l.useState)(null);return Object(l.useEffect)(()=>{t&&a&&fetch("https://bike-comparison-x1at.onrender.com/geometry-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bike1:t,bike2:a})}).then(e=>e.json()).then(e=>{c(e.image_base64)}).catch(e=>console.error("Error fetching geometry image:",e))},[t,a]),n.a.createElement("div",{style:{textAlign:"center",marginTop:"30px"}},n.a.createElement("h3",null,"\ud83d\uddbc\ufe0f Front-End Geometry Visual"),r?n.a.createElement("img",{src:`data:image/png;base64,${r}`,alt:"Geometry Comparison",style:{maxWidth:"100%",border:"1px solid #ccc"}}):n.a.createElement("p",null,"Loading geometry image..."))};var h=()=>{const[e,t]=Object(l.useState)([]),[a,r]=Object(l.useState)([]),[c,m]=Object(l.useState)([]),[s,h]=Object(l.useState)(null),[d,g]=Object(l.useState)(null),[p,E]=Object(l.useState)(!1),[b,f]=Object(l.useState)(null),[k,v]=Object(l.useState)(""),[y,S]=Object(l.useState)(null),[j,C]=Object(l.useState)(null),[O,x]=Object(l.useState)(!1),[D,R]=Object(l.useState)(null),[_,M]=Object(l.useState)("");return Object(l.useEffect)(()=>{o.a.get("https://bike-comparison-x1at.onrender.com/components/frames").then(e=>t(e.data)).catch(e=>console.error("Error fetching frames:",e)),o.a.get("https://bike-comparison-x1at.onrender.com/components/stems").then(e=>r(e.data)).catch(e=>console.error("Error fetching stems:",e)),o.a.get("https://bike-comparison-x1at.onrender.com/components/handlebars").then(e=>m(e.data)).catch(e=>console.error("Error fetching handlebars:",e))},[]),n.a.createElement("div",null,n.a.createElement("h2",null,"Bike Setup Comparison"),n.a.createElement("div",{style:{display:"flex",justifyContent:"space-around"}},n.a.createElement("div",null,n.a.createElement("h3",null,"Bike 1 (Blue)"),n.a.createElement("label",null,"Frame: "),n.a.createElement("select",{onChange:t=>h(e.find(e=>e.id===parseInt(t.target.value)))},n.a.createElement("option",{value:""},"Select a frame"),e.map(e=>n.a.createElement("option",{key:e.id,value:e.id},e.make," - ",e.size))),n.a.createElement("br",null),n.a.createElement("label",null,"Stem: "),n.a.createElement("select",{onChange:e=>{const t=a.find(t=>t.id===parseInt(e.target.value));g(t)}},n.a.createElement("option",{value:""},"Select a stem"),a.map(e=>n.a.createElement("option",{key:e.id,value:e.id},e.make," - ",e.length,"mm, ",p?-e.angle:e.angle,"\xb0"))),n.a.createElement("label",null,n.a.createElement("input",{type:"checkbox",checked:p,onChange:()=>E(!p)})," ","Invert Stem"),n.a.createElement("br",null),n.a.createElement("label",null,"Handlebar: "),n.a.createElement("select",{onChange:e=>f(c.find(t=>t.id===parseInt(e.target.value)))},n.a.createElement("option",{value:""},"Select a handlebar"),c.map(e=>n.a.createElement("option",{key:e.id,value:e.id},e.make," - ",e.width,"mm, Reach ",e.reach,"mm, Drop ",e.drop,"mm"))),n.a.createElement("br",null),n.a.createElement("label",null,"Stack Height (mm): "),n.a.createElement("input",{type:"number",value:k,onChange:e=>v(e.target.value),placeholder:"Enter stack height"})),n.a.createElement("div",null,n.a.createElement("h3",null,"Bike 2 (Red)"),n.a.createElement("label",null,"Frame: "),n.a.createElement("select",{onChange:t=>S(e.find(e=>e.id===parseInt(t.target.value)))},n.a.createElement("option",{value:""},"Select a frame"),e.map(e=>n.a.createElement("option",{key:e.id,value:e.id},e.make," - ",e.size))),n.a.createElement("br",null),n.a.createElement("label",null,"Stem: "),n.a.createElement("select",{onChange:e=>{const t=a.find(t=>t.id===parseInt(e.target.value));C(t)}},n.a.createElement("option",{value:""},"Select a stem"),a.map(e=>n.a.createElement("option",{key:e.id,value:e.id},e.make," - ",e.length,"mm, ",O?-e.angle:e.angle,"\xb0"))),n.a.createElement("label",null,n.a.createElement("input",{type:"checkbox",checked:O,onChange:()=>x(!O)})," ","Invert Stem"),n.a.createElement("br",null),n.a.createElement("label",null,"Handlebar: "),n.a.createElement("select",{onChange:e=>R(c.find(t=>t.id===parseInt(e.target.value)))},n.a.createElement("option",{value:""},"Select a handlebar"),c.map(e=>n.a.createElement("option",{key:e.id,value:e.id},e.make," - ",e.width,"mm, Reach ",e.reach,"mm, Drop ",e.drop,"mm"))),n.a.createElement("br",null),n.a.createElement("label",null,"Stack Height (mm): "),n.a.createElement("input",{type:"number",value:_,onChange:e=>M(e.target.value),placeholder:"Enter stack height"}))),n.a.createElement(i,{frame1:s,stem1:d?{...d,angle:p?-d.angle:d.angle}:null,handlebar1:b,stackHeight1:k,frame2:y,stem2:j?{...j,angle:O?-j.angle:j.angle}:null,handlebar2:D,stackHeight2:_}),n.a.createElement(u,{bike1:s&&d&&b?{head_angle:s.head_angle,stack:parseFloat(k||0),stem_length:d.length,stem_angle:p?-d.angle:d.angle,bar_reach:b.reach,bar_drop:b.drop}:null,bike2:y&&j&&D?{head_angle:y.head_angle,stack:parseFloat(_||0),stem_length:j.length,stem_angle:O?-j.angle:j.angle,bar_reach:D.reach,bar_drop:D.drop}:null}))};var d=function(){return n.a.createElement("div",{className:"App"},n.a.createElement("h1",null,"Bike Comparison Tool"),n.a.createElement(h,null))};var g=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,25)).then(t=>{let{getCLS:a,getFID:l,getFCP:n,getLCP:r,getTTFB:c}=t;a(e),l(e),n(e),r(e),c(e)})};c.a.createRoot(document.getElementById("root")).render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(d,null))),g()}},[[10,1,2]]]);
//# sourceMappingURL=main.3d5fb87c.chunk.js.map